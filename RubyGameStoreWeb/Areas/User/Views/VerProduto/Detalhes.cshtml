@model Carrinho
@using RubyGameStore.Helper.StaticNames
@{
    ViewData["Title"] = "Detalhes";
}

<img id="myimg" src="@Model.Produto.BoxArt" hidden />

<section class="container pt-2" style="border: solid 1px black; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;width:100%;
background-color: #333333; background-image: url('@Model.Produto.BoxArt.Replace("\\", "/")'); background-position: center; background-size: cover;
background-blend-mode: overlay">
    <div class="row p-2">
        <h1 class="col-7 text-white">@Model.Produto.Titulo</h1>
        <div class="col-5">
            <p class="text-white text-end m-0" style="line-height:1.2">Plataforma: @Model.Produto.Plataforma</p>
            @if (Model.Produto.PrecoPromo != 0)
            {
                <p class="text-end m-0" style="color: lightgreen; font-size:1.6rem; line-height:1.6">
                    <small><s>R$ @Model.Produto.PrecoNormal.ToString("N2")</s></small> <b>R$ @Model.Produto.PrecoPromo.ToString("N2")</b>
                </p>
            }
            else
            {
                <p class="text-end m-0" style="color: lightgreen; font-size:1.6rem; line-height:1.6"><b>R$ @Model.Produto.PrecoNormal.ToString("N2")</b></p>
            }
        </div>
    </div>
    <div class="row p-2 pb-4">
        <div class=col-6>
            <p class="text-white pt-3">
                <b>Desenvolvedor: </b>@Model.Produto.Desenvolvedor <br />
                <b>Distribuidor:</b> @Model.Produto.Distribuidor
            </p>
        </div>
        <form method="post" class="col-6">
            <div class="text-end">
                <input asp-for="ProdutoId" hidden readonly />
                <input asp-for="@Model.Id" hidden readonly />
                <label asp-for="Quantidade" class="text-white" style="padding-right: 15px"></label>
                <input asp-for="Quantidade" class="form-control col-8 text-center mb-1" style="max-width: 121px; margin-left: auto" />
                <div>
                    <button type="submit" class="btn btn-success" style="min-width: 121px"><i class="bi bi-cart-plus"></i>&nbsp; Adicionar</button>
                </div>
            </div>
        </form>
    </div>
</section>

<section class="container pt-4 pb-4 col-12" style="border: solid 1px #373a3c; border-top:none; border-bottom: none; background-color: #f8f8f8; min-height: calc(100vh - 492px)">
    <div class="row">
        <div class="col-12 col-lg-6 px-4">
            <h3><b>Descrição do Jogo:</b></h3>
            <p class="">@Html.Raw(@Model.Produto.Descricao)</p>
        </div>
        <div class="d-none d-lg-inline col-6 px-4">
            <div class="col-12">
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block w-100" src="@Model.Produto.Screenshot1">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Produto.Screenshot2">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Produto.Screenshot3">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Produto.Screenshot4">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Produto.Screenshot5">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Produto.Screenshot6">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="mt-4 col-12 px-0 d-flex">
                    <a class="btn btn-primary text-start mx-auto mb-1" style="width: 150px" href="@Model.Produto.LinkTrailer" target="_blank"><i class="bi bi-youtube"></i>&nbsp; Assistir Trailer</a>
                    <a class="btn btn-primary text-start mx-auto" style="width: 150px"><i class="bi bi-heart-fill"></i>&nbsp; Minha Lista</a>
                    <a class="btn btn-primary text-start mx-auto" style="width: 150px"><i class="bi bi-share-fill"></i>&nbsp; Compartilhar</a>
                </div>
            </div>

        </div>
    </div>
</section>

<section class="container row mx-auto" style="border: solid 1px black; border-top-left-radius: 10px; border-top-right-radius: 10px; background-color: #333333">
    <div class="col-6 px-4 pt-2">
        <p class="text-white"><b>Gênero: </b>@Model.Produto.Genero</p>
        <p class="text-white"><b>Data de Lançamento: </b>@Model.Produto.DataLancamento.ToString("dd/MM/yyyy")</p>
        <p class="text-white"><b>Jogadores: </b>@Model.Produto.Jogadores</p>
    </div>

    <div class="col-6 px-4 pt-2 d-flex justify-content-end">
        <div class="d-flex align-middle my-auto" style="background-color: white; height:80px; border-radius: 10px; padding:10px">
            <img class="my-auto" src="~/images/assets/misc/Metacritic_logo.svg" style="max-height: 45px; margin-right: 15px" />
            @if (@Model.Produto.Metascore > 74)
            {
                <div class="my-auto" style="color:white; background-color:#6c3; border-radius:6px; vertical-align:middle; text-align:center; width:60px; height: 60px; line-height:60px">
                    <p style="font-family:Arial; font-weight:bold; font-size:27px">@Model.Produto.Metascore</p>
                </div>
            }
            else if (@Model.Produto.Metascore > 49)
            {
                <div class="my-auto" style="color:white; background-color:#fc3; border-radius:6px; vertical-align:middle; text-align:center; width:60px; height: 60px; line-height:60px">
                    <p style="font-family:Arial; font-weight:bold; font-size:27px">@Model.Produto.Metascore</p>
                </div>
            }
            else if (@Model.Produto.Metascore > 0)
            {
                <div class="my-auto" style="color:white; background-color:#f00; border-radius:6px; vertical-align:middle; text-align:center; width:60px; height: 60px; line-height:60px">
                    <p style="font-family:Arial; font-weight:bold; font-size:27px">@Model.Produto.Metascore</p>
                </div>
            }
            else
            {
                <div class="my-auto" style="color:white; background-color:#ccc; border-radius:6px; vertical-align:middle; text-align:center; width:60px; height: 60px; line-height:60px">
                    <p style="font-family:Arial; font-weight:bold; font-size:27px">tbd</p>
                </div>
            }
        </div>
        <div class="text-white my-auto px-4">
            @if (@Model.Produto.Plataforma == Plataforma.NSW)
            {
                <img src="~/images/assets/plataformas/nintendo.svg" style="height: 70px; width: 70px; filter: invert(1) brightness(100)">
            }
            @if (@Model.Produto.Plataforma == Plataforma.PC)
            {
                <img src="~/images/assets/plataformas/PC.svg" style="height: 80px; width: 80px; filter: invert(1) brightness(100)">
            }
            @if (@Model.Produto.Plataforma == Plataforma.PS4 || @Model.Produto.Plataforma == Plataforma.PS5)
            {
                <img src="~/images/assets/plataformas/playstation.svg" style="height: 60px; font-color:white; filter: invert(1) brightness(100)">
            }
            @if (@Model.Produto.Plataforma == Plataforma.XONE || @Model.Produto.Plataforma == Plataforma.XSXS)
            {
                <img src="~/images/assets/plataformas/xbox.svg" style="height: 70px; width: 70px; filter: invert(1) brightness(100)">
            }
        </div>
        <div class="text-white my-auto">
            @if (@Model.Produto.Classificacao == Classificacao.ESRB_E)
            {
                <img src="~/images/assets/classificacao/E.svg" />
            }
            @if (@Model.Produto.Classificacao == Classificacao.ESRB_E10)
            {
                <img src="~/images/assets/classificacao/E10.svg" />
            }
            @if (@Model.Produto.Classificacao == Classificacao.ESRB_T)
            {
                <img src="~/images/assets/classificacao/T.svg" />
            }
            @if (@Model.Produto.Classificacao == Classificacao.ESRB_M)
            {
                <img src="~/images/assets/classificacao/M.svg" />
            }
            @if (@Model.Produto.Classificacao == Classificacao.ESRB_A)
            {
                <img src="~/images/assets/classificacao/A.svg" />
            }
            @if (@Model.Produto.Classificacao == Classificacao.ESRB_RP)
            {
                <img src="~/images/assets/classificacao/RP.svg" />
            }
        </div>
    </div>
</section>

@section Scripts{
<script>
    $(document).ready(function(){
        var sourceImage = document.getElementById("myimg");
        var colorThief = new ColorThief();
        var color = colorThief.getColor(sourceImage);
        document.body.style.background = "linear-gradient(to bottom, rgb(" + color + " ), black )";
       });
    $('.carousel').carousel();
</script>
}